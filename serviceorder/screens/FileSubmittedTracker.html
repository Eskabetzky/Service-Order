<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Bona+Nova+SC:ital,wght@0,400;0,700;1,400&family=DM+Serif+Text:ital@0;1&family=Shantell+Sans:ital,wght@0,300..800;1,300..800&family=Special+Elite&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="style.css">
  <title>File Tracker</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
    }
    th, td {
      border: 1px solid #ccc;
      padding: 10px;
      text-align: center;
      background-color: #ffdfdf;
    }
    th {
      background-color: #f4f4f4;
    }
    input[type="text"] {
      width: 200px;
      padding: 5px;
      border-radius: 10px;
      font-size: bold;
    }
    button {
      width: 120px;
      padding: 3px 6px;
      margin-right: 5px;
      cursor: pointer;
      border-radius: 5px;
      background-color: aquamarine;
      font-size: 1rem;
    }
    .actions {
      margin-bottom: 20px;
      justify-content: center;
    }
    .heading-h2 {
            color: #007222;
            text-align: center;
            margin-top: 100px;
            font-size: large;
            margin-bottom: 40px;
        }
  </style>
</head>
<body>
  <div class="heading-h2">
    <h2 class="heading">Department of Agrarian Reform</h2> 
    <h2>File Tracker</h2>
</div>
  <!-- Form to Add/Update Records -->
  <div class="actions">
    <input type="text" id="recordInput" placeholder="Enter a record">
    <button onclick="addOrUpdateRecord()">Add/Update Record</button>
    <button onclick="deleteRecords()">Delete Selected</button>
  </div>

  <!-- Table to Display Records -->
  <table id="recordTable">
    <thead>
      <tr>
        <th colspan="1">Select</th>
        <th colspan="1">Name</th>
        <th colspan="1">Action</th>
        <th colspan="12">DTR Compliance</th>
        <th colspan="2">IPCR</th>
        <th colspan="1">SALN</th>
        <th colspan="1">PDS</th>
        <th colspan="1">IDP</th>
      </tr>
      <tr>
        <th>Select</th>
        <th>Name</th>
        <th> </th>
        <th>Jan</th>
        <th>Feb</th>
        <th>Mar</th>
        <th>Apr</th>
        <th>May</th>
        <th>June</th>
        <th>July</th>
        <th>August</th>
        <th>Sept.</th>
        <th>Oct.</th>
        <th>Nov</th>
        <th>Dec</th>
        <th>Jan-June</th>
        <th>Jul-Dec</th>
        <th>SALN</th>
        <th>PDS</th>
        <th>IDP</th>
      </tr>
    </thead>
    <tbody>
      <!-- Records will be dynamically added here -->
    </tbody>
  </table>
  <button onclick="saveRecords()">Save</button>

  <script>
    let records = JSON.parse(localStorage.getItem('records')) || []; // Load records from localStorage
    let editIndex = null; // Track the index of the record being edited

    // Function to add or update a record
    function addOrUpdateRecord() {
      const input = document.getElementById('recordInput');
      const recordText = input.value.trim();

      if (recordText === '') {
        alert('Please enter a record.');
        return;
      }

      if (editIndex !== null) {
        // Update existing record
        records[editIndex].text = recordText;
        editIndex = null; // Reset edit index
      } else {
        // Add new record with default checkboxes
        records.push({
          text: recordText,
          checked: false,
          months: Array(12).fill(false), // January to December
          ipcr: [false, false], // Jan-June, July-Dec
          saln: false,
          pds: false,
          idp: false,
        });
      }

      input.value = ''; // Clear input field
      renderTable(); // Refresh the table
    }

    // Function to delete selected records
    function deleteRecords() {
      records = records.filter((record, index) => !record.checked); // Remove checked records
      renderTable(); // Refresh the table
      alert('Records has been deleted!');
    }

    // Function to save records to localStorage
    function saveRecords() {
      localStorage.setItem('records', JSON.stringify(records)); // Save records to localStorage
      alert('Records saved successfully!');
    }

    // Function to toggle checkbox state
    function toggleCheckbox(index) {
      records[index].checked = !records[index].checked;
      renderTable(); // Refresh the table
    }

    // Function to edit a record
    function editRecord(index) {
      const input = document.getElementById('recordInput');
      input.value = records[index].text; // Populate input field with record text
      editIndex = index; // Set edit index
    }

    // Function to render the table
    function renderTable() {
      const tbody = document.querySelector('#recordTable tbody');
      tbody.innerHTML = ''; // Clear existing rows

      records.forEach((record, index) => {
        const row = document.createElement('tr');
        row.innerHTML = `
          <td><input type="checkbox" ${record.checked ? 'checked' : ''} onchange="toggleCheckbox(${index})"></td>
          <td>${record.text}</td>
          <td><button onclick="editRecord(${index})">Edit</button></td>
          ${record.months.map((month, i) => `
            <td><input type="checkbox" ${month ? 'checked' : ''} onchange="toggleMonthCheckbox(${index}, ${i})"></td>
          `).join('')}
          ${record.ipcr.map((ipcr, i) => `
            <td><input type="checkbox" ${ipcr ? 'checked' : ''} onchange="toggleIPCRCheckbox(${index}, ${i})"></td>
          `).join('')}
          <td><input type="checkbox" ${record.saln ? 'checked' : ''} onchange="toggleSALNCheckbox(${index})"></td>
          <td><input type="checkbox" ${record.pds ? 'checked' : ''} onchange="togglePDSCheckbox(${index})"></td>
          <td><input type="checkbox" ${record.idp ? 'checked' : ''} onchange="toggleIDPCheckbox(${index})"></td>
        `;
        tbody.appendChild(row);
      });
    }

    // Function to toggle month checkbox
    function toggleMonthCheckbox(recordIndex, monthIndex) {
      records[recordIndex].months[monthIndex] = !records[recordIndex].months[monthIndex];
      renderTable(); // Refresh the table
    }

    // Function to toggle IPCR checkbox
    function toggleIPCRCheckbox(recordIndex, ipcrIndex) {
      records[recordIndex].ipcr[ipcrIndex] = !records[recordIndex].ipcr[ipcrIndex];
      renderTable(); // Refresh the table
    }

    // Function to toggle SALN checkbox
    function toggleSALNCheckbox(recordIndex) {
      records[recordIndex].saln = !records[recordIndex].saln;
      renderTable(); // Refresh the table
    }

    // Function to toggle PDS checkbox
    function togglePDSCheckbox(recordIndex) {
      records[recordIndex].pds = !records[recordIndex].pds;
      renderTable(); // Refresh the table
    }

    // Function to toggle IDP checkbox
    function toggleIDPCheckbox(recordIndex) {
      records[recordIndex].idp = !records[recordIndex].idp;
      renderTable(); // Refresh the table
    }

    // Initial render
    renderTable();
  </script>
</body>
</html>